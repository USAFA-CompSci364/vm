name: Install

on:
  pull_request:
  push:
  workflow_dispatch:

jobs:
  install:
    runs-on: ubuntu-latest
    container: ubuntu:18.04
    env:
      DEBIAN_FRONTEND: noninteractive
    steps:
      - uses: actions/checkout@v2
      - name: install dependencies
        run: |
          apt update
          apt install --no-install-recommends --quiet --yes \
              apt-utils \
              ca-certificates \
              gnupg \
              patch \
              sudo \
              tzdata
      - name: services
        run: |
          service --status-all
      - name: install
        env:
          DB_PASSWORD: root
        run: |
          ./install.sh
